name: Publish to WinGet
on:
  release:
    types: [published]

jobs:
  publish:
    runs-on: windows-latest
    steps:
      - name: WinGet Releaser
        uses: vedantmgoyal9/winget-releaser@v2
        with:
          # Token de seguridad
          token: ${{ secrets.WINGET_TOKEN }}
          
          # ID de tu paquete
          identifier: biondi53.QuickExplorer
          
          # Filtro para el archivo
          installers-regex: '\.msi$'
          
          # --- CORRECCIONES PARA EVITAR ERRORES ---
          
          # 1. Define que se instala en "Archivos de Programa" (requiere admin)
          scope: machine
          
          # 2. Obliga a desinstalar la versi√≥n vieja antes de poner la nueva
          # Esto evita conflictos de archivos en uso o GUIDs distintos
          upgrade-behavior: uninstallPrevious
